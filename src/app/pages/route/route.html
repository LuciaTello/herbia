<a routerLink="/" class="back-link">{{ i18n.t().route.back }}</a>

<h2>{{ i18n.t().route.title }}</h2>

<form class="route-form" (ngSubmit)="onSearch()">
  <div class="field">
    <label for="origin">{{ i18n.t().route.originLabel }}</label>
    <input
      id="origin"
      type="text"
      [placeholder]="i18n.t().route.originPlaceholder"
      [ngModel]="origin()"
      (ngModelChange)="origin.set($event)"
      name="origin"
      required
    />
  </div>

  <div class="field">
    <label for="destination">{{ i18n.t().route.destinationLabel }}</label>
    <input
      id="destination"
      type="text"
      [placeholder]="i18n.t().route.destinationPlaceholder"
      [ngModel]="destination()"
      (ngModelChange)="destination.set($event)"
      name="destination"
      required
    />
  </div>

  <button type="submit" class="primary-button" [disabled]="loading()">
    @if (loading()) {
      {{ i18n.t().route.searching }}
    } @else {
      {{ i18n.t().route.search }}
    }
  </button>
</form>

@if (loading()) {
  <div class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-message">{{ loadingMessage() }}</p>
    <p class="loading-hint">{{ i18n.t().route.loadingHint }}</p>
  </div>
}

@if (error()) {
  <p class="error-message">{{ error() }}</p>
}

@if (plants().length > 0) {
  <section class="results">
    <h3>{{ i18n.t().route.resultsTitle }}</h3>

    @for (plant of plants(); track plant.scientificName) {
      <article class="plant-card">
        <img [src]="plant.imageUrl" [alt]="plant.commonName" />
        <div class="plant-info">
          <h4>{{ plant.commonName }}</h4>
          <p class="scientific">{{ plant.scientificName }}</p>
          <p>{{ plant.description }}</p>
        </div>
      </article>
    }

    <button
      class="primary-button start-trek-button"
      (click)="onStartTrek()"
      [disabled]="saving()"
    >
      @if (saving()) {
        {{ i18n.t().route.saving }}
      } @else {
        {{ i18n.t().route.startTrek }}
      }
    </button>
  </section>
}
