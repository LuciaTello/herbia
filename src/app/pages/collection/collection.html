<a routerLink="/" class="back-link">{{ i18n.t().collection.back }}</a>

<h2>{{ i18n.t().collection.title }}</h2>

@if (loading()) {
  <div class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-message">{{ i18n.t().collection.loading }}</p>
  </div>
} @else if (collection().length === 0) {
  <div class="empty">
    <p>{{ i18n.t().collection.emptyLine1 }}</p>
    <p>{{ i18n.t().collection.emptyLine2 }}</p>
  </div>
} @else {
  <div class="collection-list">
    @for (found of collection(); track found.id) {
      <article class="found-card">
        <button class="remove-button" (click)="removePlant(found.id)">&times;</button>
        <div class="plant-thumbnail" (click)="openGallery(found.imageUrls, found.commonName)">
          @if (found.imageUrls?.length) {
            <img [src]="found.imageUrls[0]" [alt]="found.commonName" />
          } @else {
            <div class="no-photo">?</div>
          }
        </div>
        <div class="found-info">
          <h4>{{ found.commonName }}</h4>
          <p class="scientific">{{ found.scientificName }}</p>
          <p class="chance">{{ found.chancePercent }}%</p>
          <p class="route">{{ found.trek?.origin }} â†’ {{ found.trek?.destination }}</p>
          <p class="date">{{ found.foundAt }}</p>
        </div>
      </article>
    }
  </div>
}

@if (galleryImages().length) {
  <app-photo-gallery
    [images]="galleryImages()"
    [plantName]="galleryPlantName()"
    (closeGallery)="closeGallery()"
  />
}
